<! XRTPRODUCTS (JUNE 2015)  >
<html>
<head>
<style type="text/css">
  body { margin-left: 5%; margin-right: 5%; }
  h1,h2,h3,h4 { margin-left: -5%;}
</style>
<title>xrtproducts help file</title>
</head>

<body>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#9690CC">
<h2>NAME</h2>
xrtproducts -- Generate high level product data files from a cleaned event file.
<h2>USAGE</h2>
<tt>xrtproducts infile outdir [parameter = <value>] </tt>
<h2>DESCRIPTION</h2>


'xrtproducts' extracts high level product data files, i.e. spectra,
light curves and images, for the XRT Photon Counting (PC), Windowed
Timing (WT) and Photodiode (PD) modes data using as input the
calibrated and screened event file (Level 2). For the XRT Image mode
data, 'xrtproducts' produces a sky coordinates image plot.
<ul>
<li>
The Photon Counting mode products are: spectrum, light curve and
image.  The source spectrum and light curve are extracted by filtering
the data on a spatial region in sky coordinates. If the parameter
'regionfile' is set to DEFAULT the user, through the parameters 'ra',
'dec' and 'radius', can specify the Right Ascension and Declination of
the center and the radius of a circular extraction region. A region
file with an arbitrary shape can be input through the parameter
'regionfile'. This file should have a format compatible with 'xselect'
and 'ds9'.  A full field of view image in sky coordinates in the
0.5-10 keV band is produced if the parameter 'imagefile' is different
from 'NONE'.
<li>
Windowed Timing mode products are: spectrum, light curve and image.
The WT mode has only information in one one spatial dimension. If the
parameter 'regionfile' is set to DEFAULT the user, through the
parameters 'ra', 'dec' and 'radius', can specify the Right Ascension
and Declination of the center and the radius of a circular extraction
region. A region file with an arbitrary shape can be input through the
parameter 'regionfile'. An image in RAW coordinates is produced if the
parameter 'imagefile' is different from 'NONE'.
<li>
Low rate and Piledup Photodiode modes products are: spectrum and light
curve. The PD modes, Low Rate and Piledup, do not have spatial
information and all the events are used to create a spectrum and a
light curve.
<li>
Image mode products are: image plot. The task'xrtproducts' generates a
plot of the full field of view image in sky coordinates.
</ul>
<p>
Spectra and light curves for all modes are not background
subtracted. By setting the parameter 'bkgextract' to 'yes' the user
can also extract the spectrum and light-curve of the background from a
region file specified by the parameter 'bkgregionfile'. For the PC and
WT modes, the region definition is assumed to be always in sky
coordinates. The user can set the binsize (in seconds) and the minimum
and maximum PI channels of the extracted light curve via the
parameters 'binsize', 'pilow' and 'pihigh', respectively. Moreover,
the user can apply a time filter to the event file providing in input
a fits GTI file (parameter 'gtifile').
<p>
If the parameter 'phafile' is different from 'NONE' the spectrum is
extracted and the ARF file is calculated via the task 'xrtmkarf'. Only
for PC and WT modes, the arf calculation takes into account an input
exposure map if the parameter 'expofile' is different from 'NONE'. The
ARF file can also be generated by running separately 'xrtmkarf' (see
'xrtmkarf' help).
<p>
By default (input parameter 'correctlc' set to 'yes'), the
task also generates a telescope vignetting and Point Spread Function
(PSF) corrected light-curve (parameter 'lccorrfile') by an internal
run of the 'xrtlccorr' task (see help file). In this case, it is
necessary to specify in input also the attitude file (parameter
'attfile') and the Housekeeping Header Packets file (parameter
'hdfile').
<p>
By setting the parameter 'plotdevice' to GIF or PS, the user can
choose the device for the plots of the image, light curve and spectrum
generated.

<h2>PARAMETERS</h2>
<dl>
<dt>infile [file name]
<dd>Name  of  the  input FITS event file to be processed. Unix-compressed file are allowed.
<p>
<dt>regionfile [file name]
<dd>Name of the source region file for spatial filtering. If DEFAULT a standard spatial region 
is used for products extraction. For PC and WT modes the standard spatial region is a CIRCLE specified through 
the parameters 'ra', 'dec' and 'radius'.
<p>
<dt>(bkgextract = no) [boolean]
<dd>If set to yes, extract background products for PC and WT mode.
<p>
<dt>bkgregionfile [file name]
<dd>Name of the input background region file (used only if bkgextract=yes).
<p>
<dt>outdir [directory name]
<dd>Directory for the output files.
<p>
<dt>stemout [string]
<dd>Stem for the output files. Input 'DEFAULT' to use Standard Naming Convention.
<p>
<dt>ra [string]
<dd>Right Ascension (J2000.0) of the center of the region to be used for spatial filtering. 
<p>
<dt>dec [string]
<dd>Declination (J2000.0) of the center of the region to be used for spatial filtering.
<p>
<dt>radius [real]
<dd>Source radius of the circular region for spatial filtering in pixel (only for PC and WT).
<p>
<dt> (binsize = -99) [real]
<dd>Bin size (seconds) for the light curve. If <0 a default value is used (2.51 s for PC, 
1 s for WT and PD, 0.1 s for WT in SETTLING mode).
<p>
<dt>(display = no) 
<dd>If 'yes' is input, plots the image of the field on the screen.
<p>
<dt>(lcfile = DEFAULT) [file name]
<dd>Name of the output source light curve file or DEFAULT to use stem or NONE for none.
<p>
<dt>(phafile = DEFAULT) [file name]
<dd>Name of the output source spectrum file or DEFAULT to use stem or NONE for none.
<p>
<dt>(bkglcfile = DEFAULT) [file name]
<dd>Name of the output background light curve file or DEFAULT to use stem or NONE for none (used only if bkgextract=yes).
<p>
<dt>(bkgphafile = DEFAULT) [file name]
<dd>Name of the output background spectrum file or DEFAULT to use stem or NONE for none (used only if bkgextract=yes).
<p>
<dt>(imagefile = DEFAULT) [file name]
<dd>Name of the output image file or DEFAULT to use stem  or NONE for none.
<p>
<dt>(gtifile = NONE) [file name]
<dd>Name of the input GTI file for spectrum and light curve extraction or NONE for none
<p>
<dt>(arffile = DEFAULT) [file name]
<dd>Name of the output ARF file. DEFAULT to use stem.
<p>
<dt>(rmffile = CALDB) [file name]
<dd>Name of the input RMF file. If set to CALDB (default), use the file in the Calibration Database.
<p>
<dt>(mirfile = CALDB) [file name]
<dd>Name of the input mirror on-axis effective area file. If set to CALDB (default), use the file in the 
Calibration Database. Used only if parameter 'inarffile' is NONE.
<p>
<dt>(transmfile = CALDB)  [file name]
<dd>Name the input filter transmission file. If set to CALDB (default), use the file in the Calibration 
Database. Used only if parameter 'inarffile' is NONE.
<p>
<dt>(inarffile = CALDB) [file name]
<dd>Name of the input on-axis  Ancillary Response Function (ARF) file. If set to 'CALDB' (default value), 
use the file in the Calibration Database. If set to NONE the on-axis ARF is calculated using the parameters 
'mirfile' and 'transmfile'.
<p>
<dt>(psffile = CALDB)  [file name]
<dd>Name the input psf FITS file.  If CALDB is input (default), use the file in the Calibration Database. 
<p>
<dt>(vigfile = CALDB)   [file name]
<dd>Name input vignetting FITS file.If CALDB is input (default), use the file in the Calibration Database.
<p>
<dt>(psfflag = yes) [boolean] 
<dd>If set to 'yes', correct for the PSF when calculates the ARF.
<p>
<dt>(extended = no) [boolean] 
<dd>Extended source flag for ARF generation.
<p>
<dt>(arfboxsize = 20) [integer] 
<dd>Size in pixel for the subimage boxes for ARF generation (used if extended=yes).
<p>
<dt>expofile [file name]
<dd>Name of the input exposure map file (or NONE for none).
<p>
<dt>(plotdevice = gif)
<dd>Device for plots (gif or ps).
<p>
<dt>(pilow = 30) [integer]             
<dd>Minimum PI value for light curve extraction
<p>
<dt>(pihigh = 1000) [integer]             
<dd>Maximum PI value for light curve extraction
<p>
<dt>(correctlc = yes)
<dd>If set to 'yes', correct source light-curve with the xrtlccorr module.
<p>
<dt>attfile [file name]
<dd>Name of the input Attitude FITS file (only if correctlc=yes).
<p>
<dt>hdfile [file name]
<dd>Name of the input Housekeeping Header Packets FITS file (only if correctlc=yes).
<p>
<dt>(outinstrfile = DEFAULT) [file name]
<dd>Name of the output Instrument Map file or 'DEFAULT' for standard name (only if correctlc=yes).
<p>
<dt>(corrfile = DEFAULT) [file name]
<dd>Name of the output corrected source LC file or DEFAULT for standard name (only if correctlc=yes).
<p>
<dt>(lccorrfile = DEFAULT) [file name]
<dd>Name of the output corrected source LC file or DEFAULT for standard name (only if correctlc=yes).
<p>
<dt>(wtnframe = 10) [integer]
<dd>Number of frames used to create instrument map for WT? (only if correctlc=yes).
<p>
<dt>(pcnframe = 4) [integer]
<dd>Number of frames used to create instrument map for PC? (only if correctlc=yes).
<p>
<dt>(lcenergy = 1.5) [real]
<dd>Energy value (keV units) for PSF and vignetting LC correction (only if correctlc=yes).
<p>
<dt>(clobber = no)
<dd>If set to 'yes', overwrite the output files with same name if they exist.
<p>
<dt>(chatter = 3) [integer]
<dd>Verbosity Level from 0 to 5.
<p>
<dt>(history = yes) [boolean]
<dd>If set to 'yes', include history records.
<p>
<dt>(cleanup = yes) [boolean]
<dd>If set to 'yes', delete temporary files.
</dl>
<h2>EXAMPLES</h2>
<ol>
<li>From a Photon Counting mode event file generates spectrum, ARF file, corrected light-curve and image of 
a source included in the region of 20 pixels radius centered on celestial coordinates (RA,Dec)=(43.5645,45.2048). 
The binsize of the light curve has been set to 100 s. 
<p>

<pre>>  xrtproducts infile=sw00073125003xpcw2po_cl.evt stemout=DEFAULT regionfile=DEFAULT 
   outdir=./ binsize=100 ra=43.5645 dec=45.2048 radius=20 expofile=sw00073125003xpcw2po_ex.img 
   attfile=sw00073125003pat.fits hdfile=sw00073125003xhdtc.hk 
</pre>

<li>From a Windowed Timing mode event file generates spectrum, ARF file, corrected light-curve and image of 
a source included in the input spatial region 'source.reg'. The energy spectrum and light-curve of the 
background (described in the input spatial region 'back.reg') are also generated. The binsize of the light-curves 
has been set to 1 second. 
<p>

<pre>>  xrtproducts infile=sw00599287000xwtw2po_cl.evt regionfile=source.reg outdir=./
   bkgextract=yes bkgregionfile=back.reg binsize=1 expofile=sw00599287000xwtw2po_ex.img
   hdfile=sw00599287000xhdtc.hk attfile=sw00599287000pat.fits 
</pre>

<p>
</ol>
<h2>BUGS</h2>

<h2>SEE ALSO</h2>


<h2>LAST MODIFIED</h2>
June 2015
</body>
</html>
